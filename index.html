<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dobble Generátor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = { theme: { extend: {} } };
    </script>
</head>
<body class="flex items-center justify-center min-h-screen bg-gray-100">

    <div class="card w-96 bg-white shadow-lg rounded-lg p-6">
        <h1 class="text-xl font-bold mb-4">Dobble Generátor</h1>

        <label class="block">Játék típusa</label>
        <select id="gameType" class="select select-bordered w-full mb-3">
            <option value="0">Projektív</option>
            <option value="1">Bisik</option>
        </select>

        <label class="block">Szimbolumok száma egy kártyán</label>
        <input id="symbolCount" type="number" min="2" max="13" class="input input-bordered w-full mb-3" />

        <label class="block">Szimbolumok típusa</label>
        <select id="symbolType" class="select select-bordered w-full mb-3">
            <option value="0">Képek</option>
            <option value="1">Szöveg</option>
        </select>

        <label class="block">Megjelenés típusa</label>
        <select id="appearanceType" class="select select-bordered w-full mb-3">
            <option value="0">Egyforma</option>
            <option value="1">Különböző</option>
        </select>

        <label class="block">Képek feltöltése</label>
        <input id="imageUpload" type="file" multiple class="file-input file-input-bordered w-full mb-3" />

        <button onclick="submitForm()" class="btn btn-primary w-full">Generálás</button>

        <a id="downloadLink" href="#" class="hidden btn btn-success mt-3 w-full">Letöltés</a>
    </div>

    <script>
        async function submitForm() {
            const formData = new FormData();
            formData.append("gameType", document.getElementById("gameType").value);
            formData.append("symbolCount", document.getElementById("symbolCount").value);
            formData.append("symbolType", document.getElementById("symbolType").value);
            formData.append("appearanceType", document.getElementById("appearanceType").value);

            const files = document.getElementById("imageUpload").files;
            for (let i = 0; i < files.length; i++) {
                formData.append("images", files[i]);
            }

            const response = await fetch("/generate", {
                method: "POST",
                body: formData
            });

            const data = await response.json();
            if (data.success) {
                const downloadLink = document.getElementById("downloadLink");
                downloadLink.href = data.pdfUrl;
                downloadLink.classList.remove("hidden");
            }
        }
    </script>

</body>
</html>
